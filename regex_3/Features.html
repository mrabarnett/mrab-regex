<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 6194 2009-11-11 12:05:10Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left{
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="section" id="notes">
<h1>Notes</h1>
<p>For testing and comparison with the current 're' module the new implementation is in the form of a module called 'regex'.</p>
<p>Please note that certain aspects of this module have changed from those of previous versions to make it conform better to the 're' module.</p>
<p>Please also note that <tt class="docutils literal">matchobject.captures</tt> and the related methods now return a <strong>list</strong> (or a tuple of lists for the multi-group versions) instead of a tuple as previously.</p>
</div>
<div class="section" id="flags">
<h1>Flags</h1>
<p>There are 2 kinds of flag: scoped and global. Scoped flags can apply to only part of a pattern and can be turned on or off; global flags apply to the entire pattern and can only be turned on.</p>
<p>The scoped flags are: <tt class="docutils literal">IGNORECASE</tt>, <tt class="docutils literal">MULTILINE</tt>, <tt class="docutils literal">DOTALL</tt>, <tt class="docutils literal">VERBOSE</tt>, <tt class="docutils literal">WORD</tt>.</p>
<p>The global flags are: <tt class="docutils literal">ASCII</tt>, <tt class="docutils literal">LOCALE</tt>, <tt class="docutils literal">NEW</tt>, <tt class="docutils literal">REVERSE</tt>, <tt class="docutils literal">UNICODE</tt>.</p>
<p>If neither the ASCII, LOCALE nor UNICODE flag is specified, the default is UNICODE if the regex pattern is a Unicode string and ASCII if it's a bytestring.</p>
<p>The <tt class="docutils literal">NEW</tt> flag turns on the new behaviour of this module, which can differ from that of the 're' module, such as splitting on zero-width matches, inline flags affecting only what follows, and being able to turn inline flags off.</p>
</div>
<div class="section" id="notes-on-named-capture-groups">
<h1>Notes on named capture groups</h1>
<p>All capture groups have a group number, starting from 1.</p>
<p>Groups with the same group name will have the same group number, and groups with a different group name will have a different group number.</p>
<p>The same group name can be used on different branches of an alternation because they are mutually exclusive, eg. <tt class="docutils literal"><span class="pre">(?P&lt;foo&gt;first)|(?P&lt;foo&gt;second)</span></tt>. They will, of course, have the same group number.</p>
<p>Group numbers will be reused, where possible, across different branches of a branch reset, eg. <tt class="docutils literal"><span class="pre">(?|(first)|(second))</span></tt> has only group 1. If capture groups have different group names then they will, of course, have different group numbers, eg. <tt class="docutils literal"><span class="pre">(?|(?P&lt;foo&gt;first)|(?P&lt;bar&gt;second))</span></tt> has group 1 (&quot;foo&quot;) and group 2 (&quot;bar&quot;).</p>
</div>
<div class="section" id="multithreading">
<h1>Multithreading</h1>
<p>The regex module releases the GIL during matching on instances of the built-in (immutable) string classes, enabling other Python threads to run concurrently. It is also possible to force the regex module to release the GIL during matching by calling the matching methods with the keyword argument <tt class="docutils literal">concurrent=True</tt>. The behaviour is undefined if the string changes during matching, so use it <em>only</em> when it is guaranteed that that won't happen.</p>
</div>
<div class="section" id="building-for-64-bits">
<h1>Building for 64-bits</h1>
<p>If the source files are built for a 64-bit target then the string positions will also be 64-bit. (The 're' module appears to limit string positions to 32 bits, even on a 64-bit build.)</p>
</div>
<div class="section" id="unicode">
<h1>Unicode</h1>
<p>This module supports Unicode 6.0.0.</p>
</div>
<div class="section" id="additional-features">
<h1>Additional features</h1>
<ul>
<li><p class="first">regex.escape (issue #2650)</p>
<blockquote>
<p>regex.escape has an additional keyword parameter <tt class="docutils literal">special_only</tt>. When True, only 'special' regex characters, such as '?', are escaped.</p>
<p>Examples:</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; regex.escape(&quot;foo!?&quot;)
'foo\\!\\?'
&gt;&gt;&gt; regex.escape(&quot;foo!?&quot;, special_only=True)
'foo!\\?'
</pre>
</blockquote>
</blockquote>
</li>
<li><p class="first">Repeated captures (issue #7132)</p>
<blockquote>
<p>A match object has additional methods which return information on all the successful matches of a repeated capture group. These methods are:</p>
<p><tt class="docutils literal"><span class="pre">matchobject.captures([group1,</span> <span class="pre">...])</span></tt></p>
<blockquote>
<p>Returns a list of the strings matched in a group or groups. Compare with <tt class="docutils literal"><span class="pre">matchobject.group([group1,</span> <span class="pre">...])</span></tt>.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">matchobject.starts([group])</span></tt></p>
<blockquote>
<p>Returns a list of the start positions. Compare with <tt class="docutils literal"><span class="pre">matchobject.start([group])</span></tt>.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">matchobject.ends([group])</span></tt></p>
<blockquote>
<p>Returns a list of the end positions. Compare with <tt class="docutils literal"><span class="pre">matchobject.end([group])</span></tt>.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">matchobject.spans([group])</span></tt></p>
<blockquote>
<p>Returns a list of the spans. Compare with <tt class="docutils literal"><span class="pre">matchobject.span([group])</span></tt>.</p>
</blockquote>
<p>Examples:</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; m = regex.search(r&quot;(\w{3})+&quot;, &quot;123456789&quot;)
&gt;&gt;&gt; m.group(1)
'789'
&gt;&gt;&gt; m.captures(1)
['123', '456', '789']
&gt;&gt;&gt; m.start(1)
6
&gt;&gt;&gt; m.starts(1)
[0, 3, 6]
&gt;&gt;&gt; m.end(1)
9
&gt;&gt;&gt; m.ends(1)
[3, 6, 9]
&gt;&gt;&gt; m.span(1)
(6, 9)
&gt;&gt;&gt; m.spans(1)
[(0, 3), (3, 6), (6, 9)]
</pre>
</blockquote>
</blockquote>
</li>
<li><p class="first">Atomic grouping (issue #433030)</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">(?&gt;...)</span></tt></p>
<p>If the following pattern subsequently fails, then the subpattern as a whole will fail.</p>
</blockquote>
</li>
<li><p class="first">Possessive quantifiers.</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">(?:...)?+</span></tt> ; <tt class="docutils literal"><span class="pre">(?:...)*+</span></tt> ; <tt class="docutils literal"><span class="pre">(?:...)++</span></tt> ; <tt class="docutils literal"><span class="pre">(?:...){min,max}+</span></tt></p>
<p>The subpattern is matched up to 'max' times. If the following pattern subsequently fails, then all of the repeated subpatterns will fail as a whole. For example, <tt class="docutils literal"><span class="pre">(?:...)++</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">(?&gt;(?:...)+)</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">Scoped flags (issue #433028)</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">(?flags-flags:...)</span></tt></p>
<p>The flags will apply only to the subpattern. Flags can be turned on or off.</p>
</blockquote>
</li>
<li><p class="first">Inline flags (issue #433024, issue #433027)</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">(?flags-flags)</span></tt></p>
<p>If the <tt class="docutils literal">NEW</tt> flag is turned on then the flags will apply to the end of the group or pattern and can be turned on or off. If the <tt class="docutils literal">NEW</tt> flag isn't turned on then the flags will be global and can't be turned off.</p>
</blockquote>
</li>
<li><p class="first">Repeated repeats (issue #2537)</p>
<blockquote>
<p>A regex like <tt class="docutils literal"><span class="pre">((x|y+)*)*</span></tt> will be accepted and will work correctly, but should complete more quickly.</p>
</blockquote>
</li>
<li><p class="first">Definition of 'word' character (issue #1693050)</p>
<blockquote>
<p>The definition of a 'word' character has been expanded for Unicode. This applies to <tt class="docutils literal">\w</tt>, <tt class="docutils literal">\W</tt>, <tt class="docutils literal">\b</tt> and <tt class="docutils literal">\B</tt>.</p>
</blockquote>
</li>
<li><p class="first">Groups in lookahead and lookbehind (issue #814253)</p>
<blockquote>
<p>Groups and group references are permitted in both lookahead and lookbehind.</p>
</blockquote>
</li>
<li><p class="first">Variable-length lookbehind</p>
<blockquote>
<p>A lookbehind can match a variable-length string.</p>
</blockquote>
</li>
<li><p class="first">Correct handling of charset with ignore case flag (issue #3511)</p>
<blockquote>
<p>Ranges within charsets are handled correctly when the ignore-case flag is turned on.</p>
</blockquote>
</li>
<li><p class="first">Unmatched group in replacement (issue #1519638)</p>
<blockquote>
<p>An unmatched group is treated as an empty string in a replacement template.</p>
</blockquote>
</li>
<li><p class="first">'Pathological' patterns (issue #1566086, issue #1662581, issue #1448325, issue #1721518, issue #1297193)</p>
<blockquote>
<p>'Pathological' patterns should complete more quickly.</p>
</blockquote>
</li>
<li><p class="first">Flags argument for regex.split, regex.sub and regex.subn (issue #3482)</p>
<blockquote>
<p><tt class="docutils literal">regex.split</tt>, <tt class="docutils literal">regex.sub</tt> and <tt class="docutils literal">regex.subn</tt> support a 'flags' argument.</p>
</blockquote>
</li>
<li><p class="first">Pos and endpos arguments for regex.sub and regex.subn</p>
<blockquote>
<p><tt class="docutils literal">regex.sub</tt> and <tt class="docutils literal">regex.subn</tt> support 'pos' and 'endpos' arguments.</p>
</blockquote>
</li>
<li><p class="first">'Overlapped' argument for regex.findall and regex.finditer</p>
<blockquote>
<p><tt class="docutils literal">regex.findall</tt> and <tt class="docutils literal">regex.finditer</tt> support an 'overlapped' flag which permits overlapped matches.</p>
</blockquote>
</li>
<li><p class="first">Unicode escapes (issue #3665)</p>
<blockquote>
<p>The Unicode escapes <tt class="docutils literal">\uxxxx</tt> and <tt class="docutils literal">\Uxxxxxxxx</tt> are supported.</p>
</blockquote>
</li>
<li><p class="first">Large patterns (issue #1160)</p>
<blockquote>
<p>Patterns can be much larger.</p>
</blockquote>
</li>
<li><p class="first">Zero-width match with regex.finditer (issue #1647489)</p>
<blockquote>
<p><tt class="docutils literal">regex.finditer</tt> behaves correctly when it splits at a zero-width match.</p>
</blockquote>
</li>
<li><p class="first">Zero-width split with regex.split (issue #3262)</p>
<blockquote>
<p><tt class="docutils literal">regex.split</tt> can split at a zero-width match if the <tt class="docutils literal">NEW</tt> flag is turned on. When the flag is turned off the current behaviour is unchanged because the BDFL thinks that some existing software might depend on it.</p>
</blockquote>
</li>
<li><p class="first">Splititer</p>
<blockquote>
<p><tt class="docutils literal">regex.splititer</tt> has been added. It's a generator equivalent of <tt class="docutils literal">regex.split</tt>.</p>
</blockquote>
</li>
<li><p class="first">Subscripting for groups</p>
<blockquote>
<p>A match object accepts access to the captured groups via subscripting and slicing:</p>
<pre class="doctest-block">
&gt;&gt;&gt; m = regex.search(r&quot;(?P&lt;before&gt;.*?)(?P&lt;num&gt;\d+)(?P&lt;after&gt;.*)&quot;, &quot;pqr123stu&quot;)
&gt;&gt;&gt; print m[&quot;before&quot;]
pqr
&gt;&gt;&gt; print m[&quot;num&quot;]
123
&gt;&gt;&gt; print m[&quot;after&quot;]
stu
&gt;&gt;&gt; print len(m)
4
&gt;&gt;&gt; print m[:]
('pqr123stu', 'pqr', '123', 'stu')
</pre>
</blockquote>
</li>
<li><p class="first">Named groups</p>
<blockquote>
<p>Groups can be named with <tt class="docutils literal"><span class="pre">(?&lt;name&gt;...)</span></tt> as well as the current <tt class="docutils literal"><span class="pre">(?P&lt;name&gt;...)</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">Group references</p>
<blockquote>
<p>Groups can be referenced within a pattern with <tt class="docutils literal">\g&lt;name&gt;</tt>. This also allows there to be more than 99 groups.</p>
</blockquote>
</li>
<li><p class="first">Named characters</p>
<blockquote>
<p><tt class="docutils literal">\N{name}</tt></p>
<p>Named characters are supported.</p>
</blockquote>
</li>
<li><p class="first">Unicode codepoint properties, blocks and scripts</p>
<blockquote>
<p><tt class="docutils literal">\p{name}</tt> ; <tt class="docutils literal">\P{name}</tt></p>
<p>Unicode properties, blocks and scripts are supported. <tt class="docutils literal">\p{name}</tt> matches a character which has property 'name' and <tt class="docutils literal">\P{name}</tt> matches a character which doesn't have property 'name'.</p>
<p>In order to avoid ambiguity, block names should start with <tt class="docutils literal">In</tt> and script names should start with <tt class="docutils literal">Is</tt>. If a name lacks such a prefix and it could be a block or a script, script will take priority, for example:</p>
<ol class="arabic simple">
<li><tt class="docutils literal">InBasicLatin</tt> or <tt class="docutils literal">BasicLatin</tt>, the 'BasicLatin' <strong>block</strong>.</li>
<li><tt class="docutils literal">IsLatin</tt> or <tt class="docutils literal">Latin</tt>, the 'Latin' <strong>script</strong>.</li>
<li><tt class="docutils literal">InCyrillic</tt>, the 'Cyrillic' <strong>block</strong>.</li>
<li><tt class="docutils literal">IsCyrillic</tt> or <tt class="docutils literal">Cyrillic</tt>, the 'Cyrillic' <strong>script</strong>.</li>
</ol>
</blockquote>
</li>
<li><p class="first">POSIX character classes</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">[[:alpha:]]</span></tt></p>
<p>POSIX character classes are supported.</p>
</blockquote>
</li>
<li><p class="first">Search anchor</p>
<blockquote>
<p><tt class="docutils literal">\G</tt></p>
<p>A search anchor has been added. It matches at the position where each search started/continued and can be used for contiguous matches or in negative variable-length lookbehinds to limit how far back the lookbehind goes:</p>
<pre class="doctest-block">
&gt;&gt;&gt; regex.findall(r&quot;\w{2}&quot;, &quot;abcd ef&quot;)
['ab', 'cd', 'ef']
&gt;&gt;&gt; regex.findall(r&quot;\G\w{2}&quot;, &quot;abcd ef&quot;)
['ab', 'cd']
</pre>
<ol class="arabic simple">
<li>The search starts at position 0 and matches 2 letters 'ab'.</li>
<li>The search continues at position 2 and matches 2 letters 'cd'.</li>
<li>The search continues at position 4 and fails to match any letters.</li>
<li>The anchor stops the search start position from being advanced, so there are no more results.</li>
</ol>
</blockquote>
</li>
<li><p class="first">Reverse searching</p>
<blockquote>
<p>Searches can now work backwards:</p>
<pre class="doctest-block">
&gt;&gt;&gt; regex.findall(r&quot;.&quot;, &quot;abc&quot;)
['a', 'b', 'c']
&gt;&gt;&gt; regex.findall(r&quot;(?r).&quot;, &quot;abc&quot;)
['c', 'b', 'a']
</pre>
<p>Note: the result of a reverse search is not necessarily the reverse of a forward search:</p>
<pre class="doctest-block">
&gt;&gt;&gt; regex.findall(r&quot;..&quot;, &quot;abcde&quot;)
['ab', 'cd']
&gt;&gt;&gt; regex.findall(r&quot;(?r)..&quot;, &quot;abcde&quot;)
['de', 'bc']
</pre>
</blockquote>
</li>
<li><p class="first">Matching a single grapheme</p>
<blockquote>
<p><tt class="docutils literal">\X</tt></p>
<p>The grapheme matcher is supported. It's equivalent to <tt class="docutils literal"><span class="pre">\P{M}\p{M}*</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">Branch reset</p>
<blockquote>
<p>(?|...|...)</p>
<p>Capture group numbers will be reused across the alternatives.</p>
</blockquote>
</li>
<li><p class="first">Default Unicode word boundary</p>
<blockquote>
<p>The <tt class="docutils literal">WORD</tt> flag changes the definition of a 'word boundary' to that of a default Unicode word boundary. This applies to <tt class="docutils literal">\b</tt> and <tt class="docutils literal">\B</tt>.</p>
<p>Please note: I'm unsure whether I've understood the specification correctly, so if you're using this feature I'd be interested in any feedback.</p>
</blockquote>
</li>
</ul>
</div>
</div>
</body>
</html>
